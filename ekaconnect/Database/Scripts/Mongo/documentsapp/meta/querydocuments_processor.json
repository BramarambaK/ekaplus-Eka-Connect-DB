{
  "_id": "querydocuments_processor",
  "name": "querydocuments",
  "type": "processor",
  "refType": "app",
  "refTypeId": "c45c9007-1aa9-4262-b0d5-29c5379abc54",
  "snippet": "var fileName;\r\nvar layoutdescription;\r\nvar userName;\r\nvar location;\r\nvar formData = req.body;\r\nvar query = {\r\n  bool: {\r\n    must: [],\r\n  },\r\n};\r\n\r\nif (\r\n  req.body.fileName ||\r\n  (req.body.queryParams && req.body.queryParams.fileName)\r\n) {\r\n  if (req.body.fileName) fileName = req.body.fileName;\r\n  else if (req.body.queryParams.fileName)\r\n    fileName = req.body.queryParams.fileName;\r\n  query.bool.must.push({\r\n    multi_match: {\r\n      query: fileName,\r\n      type: \"phrase_prefix\",\r\n      fields: [\"fileName\"],\r\n    },\r\n  });\r\n}\r\nif (\r\n  req.body.layoutdescription ||\r\n  (req.body.queryParams && req.body.queryParams.layoutdescription)\r\n) {\r\n  if (req.body.layoutdescription)\r\n    layoutdescription = req.body.layoutdescription;\r\n  else if (req.body.queryParams.layoutdescription)\r\n    layoutdescription = req.body.queryParams.layoutdescription;\r\n  query.bool.must.push({\r\n    multi_match: {\r\n      query: layoutdescription,\r\n      type: \"phrase_prefix\",\r\n      fields: [\"layoutdescription\"],\r\n    },\r\n  });\r\n}\r\nif (\r\n  req.body.userName ||\r\n  (req.body.queryParams && req.body.queryParams.userName)\r\n) {\r\n  if (req.body.userName) userName = req.body.userName;\r\n  else if (req.body.queryParams.userName)\r\n    userName = req.body.queryParams.userName;\r\n  query.bool.must.push({\r\n    multi_match: {\r\n      query: userName,\r\n      type: \"phrase_prefix\",\r\n      fields: [\"tags.userName\"],\r\n    },\r\n  });\r\n}\r\nif (\r\n  req.body.location ||\r\n  (req.body.queryParams && req.body.queryParams.location)\r\n) {\r\n  if (req.body.location) location = req.body.location;\r\n  else if (req.body.queryParams.location)\r\n    location = req.body.queryParams.location;\r\n  query.bool.must.push({\r\n    multi_match: {\r\n      query: location,\r\n      type: \"phrase_prefix\",\r\n      fields: [\"tags.location\"],\r\n    },\r\n  });\r\n}\r\n\r\ndelete formData.appId;\r\ndelete formData.processorDetails;\r\ndelete formData.processorId;\r\ndelete formData.propertyList;\r\n\r\nres.status(200).send({\r\n  documentlisting: {\r\n    query: query,\r\n  },\r\n  querydocuments: formData,\r\n});\r\n",
  "sys__UUID": "729f1fdd-0057-4dae-8e41-1d1db6a2b31c"
}

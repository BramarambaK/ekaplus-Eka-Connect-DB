{
  "_id": "datacall_createpurchasecontract_processor_Warrant",
  "name": "datacall_createpurchasecontract_processor_Warrant",
  "type": "processor",
  "refType": "app",
  "refTypeId": "ada131db-5171-4b9c-b6d6-caae0c6cd2f5",
  "snippet": "\r\n    var connectUrl =\r\n    req.body.propertyList.eka_connect_host +\r\n    '/data/ada131db-5171-4b9c-b6d6-caae0c6cd2f5/5c2d334d-50aa-4194-a7e6-c9055b744c2e/bulkDelete';\r\n\r\n  var connect = {\r\n    method: 'DELETE',\r\n    url: connectUrl,\r\n    headers: {\r\n      Authorization: req.headers.authorization,\r\n      'X-TenantID': req.headers['x-tenantid']\r\n    },\r\n    json: true\r\n  };\r\n  function get_connect(body) {\r\n    connect.body = {};\r\n    connect.body = body;\r\n    return new Promise(function(resolve, reject) {\r\n      request(connect, function(err, response, body) {\r\n        if (response.statusCode >= 200 && response.statusCode <= 299) {\r\n            resolve(body);\r\n          }\r\n          else {\r\n            reject(body);\r\n          }\r\n      });\r\n    });\r\n  }\r\n  if (\r\n    req &&\r\n    req.body &&\r\n    req.body.selectedData &&\r\n    req.body.selectedData.data.length > req.body.propertyList.property_default_selection\r\n  ) {\r\n    res.status(500).send('Please select maximum 50 records');\r\n  } else if (\r\n    req &&\r\n    req.body &&\r\n    req.body.selectedData &&\r\n    req.body.selectedData.data &&\r\n    req.body.selectedData.data[0] &&\r\n    req.body.selectedData.data[0]['contract_ref_no']\r\n  ) {\r\n    var filterBody = {\r\n      filterData: {\r\n        filter: [\r\n          {\r\n            fieldName: 'contract_ref_no',\r\n            value: req.body.selectedData.data[0]['contract_ref_no'],\r\n            operator: 'eq'\r\n          }\r\n        ]\r\n      }\r\n    };\r\n    get_connect(filterBody).then(function(result) {\r\n      let selectedData = req.body.selectedData.data;\r\n      let outputData = {\r\n        selectedData: JSON.stringify(selectedData),\r\n        quantity_unit: selectedData[0]['quantity_unit'],\r\n        instrument_name: selectedData[0]['instrument_name'],\r\n        storage_location: selectedData[0]['storage_location'],\r\n        Packing_Size: selectedData[0]['Packing_Size'],\r\n        quality: selectedData[0]['quality'],\r\n        crop_year: selectedData[0]['crop_year'],\r\n        origin: selectedData[0]['origin'],\r\n        title_transfer_status: selectedData[0]['title_transfer_status']\r\n      };\r\n      res.status(200).send(outputData);\r\n    });\r\n  } else {\r\n    let selectedData = req.body.selectedData.data;\r\n    let outputData = {\r\n      selectedData: JSON.stringify(selectedData),\r\n      quantity_unit: selectedData[0]['quantity_unit'],\r\n      instrument_name: selectedData[0]['instrument_name'],\r\n      storage_location: selectedData[0]['storage_location'],\r\n      Packing_Size: selectedData[0]['Packing_Size'],\r\n      quality: selectedData[0]['quality'],\r\n      crop_year: selectedData[0]['crop_year'],\r\n      origin: selectedData[0]['origin'],\r\n      title_transfer_status: selectedData[0]['title_transfer_status']\r\n    };\r\n    res.status(200).send(outputData);\r\n  }\r\n",
  "sys__UUID": "7bbfb30a-f5d3-4de8-a68d-7e1520b6251a",
  "sys__createdBy": "ekauser@ekaplus.com"
}

{
  "_id": "splitlisting_processor",
  "name": "splitlisting_processor",
  "type": "processor",
  "refType": "app",
  "refTypeId": "ada131db-5171-4b9c-b6d6-caae0c6cd2f5",
  "snippet": "\r\n    var no_of_splits;\r\n    var activityDate;\r\n    var outputData = [];\r\n\r\n    if (req.body.selectedData.stocklist[0].exchange_lot) {\r\n      if (req && req.body && req.body.selectedData && req.body.selectedData.stocksplitcomposite && req.body.selectedData.stocksplitcomposite.splitdropdown && req.body.selectedData.stocksplitcomposite.splitdropdown.activityDate) activityDate = req.body.selectedData.stocksplitcomposite.splitdropdown.activityDate;\r\n      no_of_splits = (Math.floor(req.body.selectedData.stocklist[0].exchange_lot));\r\n      if (no_of_splits < 1)\r\n        no_of_splits = no_of_splits + 1;\r\n      var quantityUnit = req.body.selectedData.stocklist[0].Quantity_UOM;\r\n      var actualQuantity = req.body.selectedData.stocklist[0].actual_quantity;\r\n      var extstockrefno = req.body.selectedData.stocklist[0].ext_stock_ref_no;\r\n      var shed = req.body.selectedData.stocklist[0].shed;\r\n      var stock_ref_no = req.body.selectedData.stocklist[0].stock_ref_no;\r\n      var instrument_name = req.body.selectedData.stocklist[0].instrument_name;\r\n      var instrument_name_value = req.body.selectedData.stocklist[0].instrument_name_value;\r\n      var quality = req.body.selectedData.stocklist[0].quality;\r\n      var warehouse = req.body.selectedData.stocklist[0].warehouse;\r\n      var exchangeDeliveryStatus = req.body.selectedData.stocklist[0].exchangeDeliveryStatus;\r\n      var Profit_Center = req.body.selectedData.stocklist[0].Profit_Center;\r\n      var Strategy = req.body.selectedData.stocklist[0].Strategy;\r\n      var cropyear = req.body.selectedData.stocklist[0].cropyear;\r\n      var origin = req.body.selectedData.stocklist[0].origin;\r\n      var product = req.body.selectedData.stocklist[0].product;\r\n      var NO_OF_UNITS = req.body.selectedData.stocklist[0].no_of_units;\r\n      var Packing_Size = req.body.selectedData.stocklist[0].Packing_Size;\r\n      var corporate = req.body.selectedData.stocklist[0].corporate;\r\n      var exchange_lot = req.body.selectedData.stocklist[0].exchange_lot;\r\n      var legal_entity = '';\r\n      if (req.body.selectedData.stocklist[0].legal_entity) {\r\n        legal_entity = req.body.selectedData.stocklist[0].legal_entity;\r\n      }\r\n      var port_name = '';\r\n      if (req.body.selectedData.stocklist[0].port_name) {\r\n        port_name = req.body.selectedData.stocklist[0].port_name;\r\n      }\r\n      var i = 0;\r\n      for (i = 0; i < no_of_splits; i++) {\r\n        outputData.push({\r\n          instrument_name: instrument_name,\r\n          instrument_name_value: instrument_name_value,\r\n          quality: quality,\r\n          warehouse: warehouse,\r\n          exchangeDeliveryStatus: exchangeDeliveryStatus,\r\n          Profit_Center: Profit_Center,\r\n          Strategy: Strategy,\r\n          cropyear: cropyear,\r\n          origin: origin,\r\n          ext_stock_ref_no: '',\r\n          no_of_units: '',\r\n          NO_OF_UNITS: NO_OF_UNITS,\r\n          quantity: '',\r\n          quantity_unit: quantityUnit,\r\n          actual_quantity: actualQuantity,\r\n          extstockrefno: extstockrefno,\r\n          shed: shed,\r\n          activityDate: activityDate,\r\n          stock_ref_no: stock_ref_no,\r\n          product: product,\r\n          Packing_Size: Packing_Size,\r\n          corporate: corporate,\r\n          exchange_lot: exchange_lot,\r\n          legal_entity: legal_entity,\r\n          port_name: port_name\r\n        });\r\n        var sys__state = {}\r\n        for (var key in outputData[i]) {\r\n          sys__state[key] = {\r\n            show: true,\r\n            disable: false\r\n          }\r\n        }\r\n        outputData[i]['sys__state'] = sys__state;\r\n        sys__state = {}\r\n      }\r\n    }\r\n    outputData[0]['ext_stock_ref_no'] = req.body.selectedData.stocklist[0].ext_stock_ref_no\r\n    outputData[0]['sys__state']['ext_stock_ref_no']['disable'] = true\r\n    outputData[0]['sys__state']['ext_stock_ref_no']['show'] = false\r\n    res.status(200).send(outputData);\r\n ",
  "sys__UUID": "b7308d31-d0a6-444f-bfa6-ffe7569a7472",
  "sys__createdBy": "ekauser@ekaplus.com"
}

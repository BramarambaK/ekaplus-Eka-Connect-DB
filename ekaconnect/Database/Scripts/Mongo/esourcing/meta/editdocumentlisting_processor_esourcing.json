{
    "_id" : "editdocumentlistingProcessor_esourcing",
    "name" : "editdocumentlisting",
    "type" : "processor",
    "refType" : "app",
    "refTypeId" : "7e484cae-36aa-46dc-b9ae-33c8d246f056",
    "snippet" : "var internalRefNo = req.body.selectedData.internalGmrRefNo;\r\nvar platform = {\r\n  method: \"POST\",\r\n  url: req.body.propertyList.eka_connect_host + \"/workflow\",\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n    Authorization: req.headers.authorization,\r\n    \"X-TenantID\": req.headers[\"x-tenantid\"]\r\n  },\r\n  body: {\r\n    appId: \"467a28cc-bc93-4e38-8ff5-0a56ae128f3b\",\r\n    workflowTaskName: \"viewdoclistdata_SC\",\r\n    task: \"viewdoclistdata_SC\",\r\n    payLoadData: \"\",\r\n    output: {\r\n      viewdoclistdata_SC: {\r\n    otherAttributes: {\r\n      internalRefNo: internalRefNo,\r\n    },\r\n  },\r\n    },\r\n  },\r\n   json: true\r\n};\r\nfunction get_platform() {\r\n  return new Promise(function(resolve, reject) {\r\n    console.log(\"Request - \" + platform.url);\r\n    console.log(\"Payload -\" + JSON.stringify(platform));\r\n    request(platform, function(err, response, body) {\r\n      console.log(\"Request Body - \" + JSON.stringify(body));\r\n      if (err || body.error) reject(body);\r\n      else {\r\n        resolve(body);\r\n      }\r\n    });\r\n  });\r\n}\r\nget_platform()\r\n  .then(function(result) {\r\n    var y = result.data;\r\n    for (var j = 0; j < y.length; j++) {\r\n      y[j][\"id\"] = y[j].documentId;\r\n      y[j][\"internalRefNo\"] = internalRefNo;\r\n      if(y[j][\"description\"].includes(':-')){\r\n        var typesDesc = y[j][\"description\"].split(\":-\");\r\n        if (typesDesc.length > 0) {\r\n          if (typesDesc[0] === \"packinglist\") y[j][\"types\"] = \"Packing List\";\r\n          else if (typesDesc[0] === \"billoflading\")\r\n            y[j][\"types\"] = \"Bill of Lading\";\r\n          else if (typesDesc[0] === \"proofofdelivery\")\r\n            y[j][\"types\"] = \"Proof of Delivery\";\r\n\t\t  else if (typesDesc[0] === \"annexIB\")\r\n            y[j][\"types\"] = \"Annex IB\";\r\n\t\t  else if (typesDesc[0] === \"annexVII\")\r\n            y[j][\"types\"] = \"Annex VII\";\r\n\t\t  else if (typesDesc[0] === \"photoofMaterial\")\r\n            y[j][\"types\"] = \"Photo of Material\";\r\n\t\t  else if (typesDesc[0] === \"transportDocument\")\r\n            y[j][\"types\"] = \"Transport Document\";\r\n\t\t  else if (typesDesc[0] === \"other\")\r\n            y[j][\"types\"] = \"Other\";\r\n          y[j][\"description\"] = typesDesc[1];\r\n        }\r\n      }\r\n    }\r\n    console.log(\"Response - \" + JSON.stringify(y));\r\n    res.status(200).send(y);\r\n  })\r\n  .catch(err => {\r\n    console.log(\"Error Executing Processor -\" + err);\r\n    res.status(500).send(err);\r\n  });",
    "sys__UUID" : "3b5c6b94-105e-4d2b-a285-b2c8580f741f"
}
{
    "_id" : "contactinformationProcessor_esourcing",
    "name" : "contactinformation",
    "type" : "processor",
    "refType" : "app",
    "refTypeId" : "7e484cae-36aa-46dc-b9ae-33c8d246f056",
    "snippet" : "var collection = {\r\n    method: 'POST',\r\n    url: req.body.propertyList.eka_connect_host + '/collectionmapper/' + req.body.appId + '/'+ '0bc6b722-cc87-4fa8-b73d-8d6d875cce58' + '/fetchCollectionRecords',\r\n    headers: {\r\n      Authorization: req.headers.authorization,\r\n      'X-TenantID': req.headers['x-tenantid'],\r\n\t  'Content-Type':'application/json',\r\n\t  'Ttl':5\r\n    },\r\n    body: {\r\n\t  \"collectionName\": \"Contact_Information\",\r\n      \"start\": \"0\",\r\n      \"limit\": \"50\",\r\n      \"criteria\": {}\r\n\t},\r\n    json: true\r\n  };\r\n\r\n  function get_Collection() {\r\n    return new Promise(function(resolve, reject) {\r\n      console.log('Request - ' + collection.url);\r\n      console.log('Payload -' + JSON.stringify(collection));\r\n      request(collection, function(err, response, body) {\r\n        console.log('Response - ' + JSON.stringify(body));\r\n        if (err || body.error) reject(body);\r\n        else {\r\n          console.log('Success');\r\n          resolve(body);\r\n        }\r\n      });\r\n    });\r\n  }\r\n  \r\n  get_Collection().then(function(result){\r\n      for(let i=0; i < result.length; i++){\r\n    if(!result[i]['Contact Information 1']){\r\n        result[i]['Contact Information'] = result[i]['Functiion'];\r\n         delete result[i]['Functiion'];\r\n          result[i]['__class']=\"font-weight\"; \r\n          continue;\r\n    }else{\r\n       result[i]['__class']=\"no-top-bottom-padding\";\r\n    }\r\n    if(result[i]['Contact Information 1']){\r\n         delete result[i]['Functiion'];\r\n    }\r\n    if(i >0 && result[i]['Contact Information']){\r\n       for(let j=i; j < result.length; j++){\r\n                if(!result[j]['Contact Information 1']){\r\n                    break;\r\n                }\r\n              if(i!=j && result[i]['Contact Information'] == result[j]['Contact Information']){\r\n                  result[j]['Contact Information']=\"\";\r\n                  result[i]['__class']= \"padding-top-10 no-top-bottom-padding\";\t\t\t\t\t\t\r\n              }\r\n       }\r\n    }    \r\n}\r\n      res.status(200).send(result);\r\n  })",
    "sys__UUID" : "547a3e12-8f9a-4e81-84a6-e52b713884ee"
}
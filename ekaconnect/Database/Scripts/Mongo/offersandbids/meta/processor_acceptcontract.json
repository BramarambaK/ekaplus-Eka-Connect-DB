{
    "_id" : "processor_acceptcontract",
    "name" : "acceptcontract",
    "type" : "processor",
    "refType" : "app",
    "version" : "V2",
    "refTypeId" : "d44a3b31-6758-4367-b8a2-3808532b0c4a",
    "snippet" : "\r\n    if (req.body.propertyList.allow_contract_integration == 'true') {\r\n      var post_collection = function post_collection() {\r\n        return new _promise2.default(function (resolve, reject) {\r\n          request(collectionapi, function (err, response, body) {\r\n            if (err || body.error) reject(body);else {\r\n              resolve(body);\r\n            }\r\n          });\r\n        });\r\n      };\r\n\r\n      var reqData = req.body;\r\n      var bodyData = {\r\n        collectionHeader: [{\r\n          fieldName: 'CP Contract Ref No',\r\n          dataType: 'String'\r\n        }, {\r\n          fieldName: 'Contract Issue Date',\r\n          dataType: 'Date'\r\n        }, {\r\n          fieldName: 'INCO Term',\r\n          dataType: 'String'\r\n        }, {\r\n          fieldName: 'Payment Terms',\r\n          dataType: 'String'\r\n        }, {\r\n          fieldName: 'Contract Quantity Unit',\r\n          dataType: 'String'\r\n        }, {\r\n          fieldName: 'Product',\r\n          dataType: 'String'\r\n        }, {\r\n          fieldName: 'Origin',\r\n          dataType: 'String'\r\n        }, {\r\n          fieldName: 'Crop Year',\r\n          dataType: 'String'\r\n        }, {\r\n          fieldName: 'Quality',\r\n          dataType: 'String'\r\n        }, {\r\n          fieldName: 'Item Quantity',\r\n          dataType: 'Number'\r\n        }, {\r\n          fieldName: 'Packing Type',\r\n          dataType: 'String'\r\n        }, {\r\n          fieldName: 'Packing Size',\r\n          dataType: 'String'\r\n        }, {\r\n          fieldName: 'Planned Shipment Quantity',\r\n          dataType: 'Number'\r\n        }, {\r\n          fieldName: 'Contract Price',\r\n          dataType: 'Number'\r\n        }, {\r\n          fieldName: 'Price Unit',\r\n          dataType: 'String'\r\n        }, {\r\n          fieldName: 'Delivery From Date',\r\n          dataType: 'Date'\r\n        }, {\r\n          fieldName: 'Delivery To Date',\r\n          dataType: 'Date'\r\n        }, {\r\n          fieldName: 'Invoice Document Price Unit',\r\n          dataType: 'String'\r\n        }, {\r\n          fieldName: 'Offer Type',\r\n          dataType: 'String'\r\n        }],\r\n        format: 'JSON',\r\n        collectionData: [[reqData.bid_id, new Date(reqData.fromDate), reqData.incoTermDisplayName, reqData.paymentTermsDisplayName, reqData.quantityUnitDisplayName, reqData.productDisplayName, 'BLR', reqData.cropYearDisplayName, reqData.qualityDisplayName, Number(reqData.quantity), reqData.packingTypeDisplayName, reqData.paymentTermsDisplayName, Number(reqData.quantity), Number(reqData.bidderprice), reqData.priceUnitDisplayName, new Date(reqData.fromDate), new Date(reqData.toDate), reqData.priceUnitDisplayName, reqData.offerType]],\r\n        collectionDescription: 'FC_Bid_To_Contract',\r\n        dataLoadOption: 'append',\r\n        collectionName: 'FC_Bid_To_Contract'\r\n      };\r\n      var collectionapi = {\r\n        method: 'PUT',\r\n        url: req.body.propertyList.platform_url + '\/collection\/v1',\r\n        headers: {\r\n          Authorization: req.headers.authorization\r\n        },\r\n        body: bodyData,\r\n        json: true\r\n      };\r\n\r\n\r\n      post_collection().then(function (data) {\r\n       success({},200);\r\n      });\r\n    } else {\r\n   success({},200);\r\n    }\r\n     ",
    "sys__UUID" : "abe7a0cd-72dc-42ba-8b8e-06a8a4cb39c3",
    "sys__createdOn" : ISODate("2019-05-22T09:51:04.600Z"),
    "sys__createdBy" : "srini@ekaplus.com"
}
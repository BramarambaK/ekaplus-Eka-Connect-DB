{
  "_id": "amendment_requestcontract_decision_step2_processor",
  "name": "amendment_requestcontract_decision_step2_processor",
  "type": "processor",
  "refType": "app",
  "refTypeId": "12325a98-a959-4939-9005-4158d136afcd",
  "snippet": "var data = req.body;\r\n    var output = {};\r\n    let multiGrade;\r\n    let frieghtDetails;\r\n    const appId = req.body.appId;\r\n    const tenant = req.headers['X-TenantID'];\r\n    const auth = req.headers.authorization;\r\n\r\n    if (data.amendment_requestcontractspreadcomposite.data) {\r\n      data = {\r\n        ...data.amendment_requestcontractspreadcomposite.data,\r\n        amendedSpread:\r\n          data.amendment_requestcontractspreadcomposite.amendment_requestcontractspreadquestion.amendedSpread\r\n      };\r\n    }\r\n    else{\r\n      data = {\r\n          ...data.amendment_requestcontractspreadcomposite.amendment_requestcontractspreadquestion\r\n      };\r\n    }\r\n\r\n    if ((typeof data.isMultiGrade == 'string' && data.isMultiGrade.toLowerCase() == 'y') || data.isMultiGrade == true) {\r\n      multiGrade = true;\r\n    } else {\r\n      multiGrade = false;\r\n    }\r\n    if (\r\n      (data.INCOTerm + '').toLowerCase() == 'ex-farm' ||\r\n      (data.INCOTerm + '').toLowerCase() == 'db' ||\r\n      data.isFreightDetails == true\r\n    ) {\r\n      frieghtDetails = true;\r\n    } else {\r\n      frieghtDetails = false;\r\n    }\r\n    output = { ...data, isMultiGrade: multiGrade, isFreightDetails: frieghtDetails };\r\n\r\n    var spreadErrorData = req.body.amendment_requestcontractspreadcomposite;\r\n\r\n    const headers = {\r\n      Authorization: auth,\r\n      'X-TenantID': tenant,\r\n      'Content-Type': 'application/json'\r\n    };\r\n\r\n    const send = (status, message) => res.status(status).send(message);\r\n\r\n    if (\r\n      spreadErrorData.amendment_requestcontractspreadquestion.amendedSpread == null ||\r\n      spreadErrorData.amendment_requestcontractspreadquestion.amendedSpread == undefined ||\r\n      spreadErrorData.amendment_requestcontractspreadquestion.amendedSpread == ''\r\n    ) {\r\n      res.status(400).send('Please send anyone of option');\r\n    } else {\r\n        res.status(200).send(output);\r\n    }",
  "sys__UUID": "397fb09e-4910-42cb-ad3d-6220e9442914"
}

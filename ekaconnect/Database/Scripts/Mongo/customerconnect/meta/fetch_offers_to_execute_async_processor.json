{
  "_id": "fetch_offers_to_execute_async_ext_processor",
  "name": "fetch_offers_to_execute_async_ext_processor",
  "refType": "app",
  "isNode":true,
  "refTypeId": "12325a98-a959-4939-9005-4158d136afcd",
  "snippet" : "var payloadData ={...req.body};\r\nif(!Array.isArray(req.body.bulkPayLoadData)){\r\n  delete payloadData[\"processorDetails\"];\r\n  delete payloadData[\"propertyList\"];\r\n}\r\n\r\nvar EXT_FETCH_OFFERS_TO_EXECUTE = {\r\n    method: \"POST\",\r\n    url: req.body.propertyList.eka_connect_host +\r\n        \"\/workflow\",\r\n    headers: {\r\n        Authorization: req.headers.authorization,\r\n        \"X-TenantID\": req.headers[\"x-tenantid\"],\r\n        \"requestid\": req.headers[\"requestid\"] + \"-fetch_offers_to_execute_async_processor-processor\"\r\n    },\r\n    body: {\r\n        \"output\": {\r\n            \"EXT_FETCH_OFFERS_TO_EXECUTE\": {\r\n                \"output\": {\r\n                    \"fetch_offers_to_execute_async_internal\": Array.isArray(req.body.bulkPayLoadData) ? req.body.bulkPayLoadData : [ payloadData ],\r\n                },\r\n                \"task\": \"fetch_offers_to_execute_async_internal\",\r\n                \"appId\": \"12325a98-a959-4939-9005-4158d136afcd\",\r\n                \"workflowTaskName\": \"fetch_offers_to_execute_async_internal\"\r\n            },\r\n        },\r\n        \"task\": \"EXT_FETCH_OFFERS_TO_EXECUTE\",\r\n        \"appId\": \"12325a98-a959-4939-9005-4158d136afcd\",\r\n        \"workflowTaskName\": \"EXT_FETCH_OFFERS_TO_EXECUTE\"\r\n    },\r\n    json: true,\r\n}\r\nfunction call_EXT_FETCH_OFFERS_TO_EXECUTE() {\r\n    return new Promise(function(resolve, reject) {\r\n        \/\/ console.log('call_EXT_FETCH_OFFERS_TO_EXECUTE Request-' + JSON.stringify(EXT_FETCH_OFFERS_TO_EXECUTE));\r\n        request(EXT_FETCH_OFFERS_TO_EXECUTE, function(err, response, body) {\r\n            \/\/ console.log('call_EXT_FETCH_OFFERS_TO_EXECUTE Response-' + JSON.stringify(response));\r\n            if (response.statusCode === 200) resolve(body);\r\n            else {\r\n                reject(err || body);\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\ncall_EXT_FETCH_OFFERS_TO_EXECUTE()\r\n.then(()=>{})\r\n.catch(err => {console.log(\"call_EXT_FETCH_OFFERS_TO_EXECUTE error-\",err);res.status(500).send(err)});\r\nres.status(200).send();",
  "sys__UUID": "52889ad3-6742-469f-b455-7dad29575fef",
  "type": "processor"
}
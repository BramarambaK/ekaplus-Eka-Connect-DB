{
  "_id": "ST_PROCESSOR_DYNAMIC_QUALITY_PROCESSOR_SMP",
  "name": "ST_PROCESSOR_DYNAMIC_QUALITY_PROCESSOR",
  "type": "processor",
  "refType": "app",
  "refTypeId": "bcb79287-04fb-4af2-ae97-61af272b2c45",
  "snippet": "\r\n    var connectUrl = req.body.propertyList.eka_connect_host + '/meta/object/ddec290e-71ee-4538-8ec9-37bbcc0cdca1';\r\n    var connect = {\r\n      method: 'GET',\r\n      url: connectUrl,\r\n      headers: {\r\n        Authorization: req.headers.authorization,\r\n        'X-TenantID': req.headers['x-tenantid']\r\n      },\r\n      json: true\r\n    };\r\n    function get_connect() {\r\n      return new Promise(function(resolve, reject) {\r\n        request(connect, function(err, response, body) {\r\n          if (err || body.error) reject(body);\r\n          else {\r\n            resolve(body);\r\n          }\r\n        });\r\n      });\r\n    }\r\n    var output = req.body.bulkPayLoadData[0];\r\n    output.custom = [];\r\n    get_connect().then(function(result) {\r\n      var fields = [];\r\n      var data = [];\r\n      var objectData = result.fields;\r\n      for (var key in req.body.bulkPayLoadData[0]) {\r\n        if (req.body.bulkPayLoadData[0][key] == '__empty__') {\r\n          req.body.bulkPayLoadData[0][key] = '';\r\n        }\r\n        for (var key2 in req.body.bulkPayLoadData[0]) {\r\n          if (req.body.bulkPayLoadData[0][key2] == '__empty__') {\r\n            req.body.bulkPayLoadData[0][key2] = '';\r\n          }\r\n          if (key2.includes(key + 'DisplayName')) {\r\n            req.body.bulkPayLoadData[0][key2] = req.body.bulkPayLoadData[0][key];\r\n          }\r\n        }\r\n      }\r\n      fields = Object.keys(req.body.bulkPayLoadData[0]);\r\n      for (var i = 0; i < fields.length; i++) {\r\n        if (!objectData.hasOwnProperty(fields[i])) {\r\n          data.push(fields[i]);\r\n        }\r\n      }\r\n      var isPresent = false;\r\n      for (var i = 0; i < data.length; i++) {\r\n        if (\r\n          data[i] !== 'sys__state' &&\r\n          data[i] !== 'refType' &&\r\n          data[i] !== 'maximumDate' &&\r\n          data[i] !== 'sys__updatedOn' &&\r\n          data[i] !== 'refTypeId' &&\r\n          data[i] !== 'sys__updatedBy' &&\r\n          data[i] !== 'userId' &&\r\n          data[i] !== 'sys__createdBy' &&\r\n          data[i] !== 'object' &&\r\n          data[i] !== 'sys__UUID' &&\r\n          data[i] !== 'sys__createdOn' &&\r\n          data[i] !== '_id' &&\r\n          data[i] !== 'sys__data__state'\r\n        ) {\r\n          output.custom.push({ [data[i]]: output[data[i]] });\r\n        }\r\n      }\r\n      for (var i = 0; i < output.custom.length; i++) {\r\n        if (Object.values(output.custom[i]).includes('')) {\r\n          isPresent = false;\r\n        } else {\r\n          isPresent = true;\r\n          break;\r\n        }\r\n      }\r\n      if (isPresent == false) {\r\n        res.status(500).send('Please enter a value for atleast one of the Quality attributes to proceed');\r\n      } else res.status(200).send(output);\r\n    });",
  "sys__UUID": "5c3023eb-58a5-4723-beae-99fa57dd36c5",
  "sys__createdOn": ISODate("2019-05-22T09:51:04.600Z"),
  "sys__createdBy": "srini@ekaplus.com"
}

{
    "_id" : "_PROCESSOR_ITEM_SAVE_Processor",
    "name" : "_PROCESSOR_ITEM_SAVE_",
    "refType" : "app",
    "refTypeId" : "5d907cd2-7785-4d34-bcda-aa84b2158415",
    "snippet" : "  var sendData = []\r\n  var moment = require('moment');\r\n  var defaultDataURL1 = req.body.propertyList.platform_url + '/api/contract/item/bulk';\r\n  var defaultdata1 = {\r\n    method: 'PUT',\r\n    url: defaultDataURL1,\r\n    body:{},\r\n    headers: {\r\n      Authorization: req.headers.authorization,\r\n      \"Content-Type\" : \"application/json\"\r\n    },\r\n    json: true\r\n  };\r\n  function get_defaultData1() {\r\n    return new Promise(function(resolve, reject) {\r\n      request(defaultdata1, function(err, response, body) {\r\n        if (err || body.error) reject(body);\r\n        else {\r\n          resolve(body);\r\n        }\r\n      });\r\n    });\r\n  }\r\n  var data = req.body.bulkcontractitemsupdate.listingcontractitem\r\n  var pa =  [{\r\n    \"internalContractRefNo\": \"PCM-2749\",\r\n    \"internalContractItemRefNo\": \"PCI-2983\",\r\n    \"contractRefNo\": \"PC-1443-SWA\",\r\n    \"amendmentReason\": \"Testingc\",\r\n    \"amendmentDate\": \"2020-05-13T18:30:00.000+0000\",\r\n    \"periodFromDate\": \"2020-05-13T18:30:00.000+0000\",\r\n    \"periodToDate\": \"2020-05-28T18:30:00.000+0000\",\r\n    \"originId\":req.body.bulkcontractitemsupdate.editcontractitem.originId,\r\n    \"qualityId\" : req.body.bulkcontractitemsupdate.editcontractitem.qualityId\r\n}]\r\n\r\n  for(let i=0;i<data.length;i++){\r\n    sendData.push({})\r\n    sendData[i]['amendmentDate'] =moment(req.body.bulkcontractitemsupdate.editcontractitem.amendmentDate).format('YYYY-MM-DD')+ 'T18:30:00.000+0000';\r\n    sendData[i]['amendmentReason'] =req.body.bulkcontractitemsupdate.editcontractitem.amendmentReason\r\n    sendData[i]['internalContractItemRefNo']  = data[i]['internalContractItemRefNo']\r\n    sendData[i]['internalContractRefNo']  = data[i]['internalContractRefNo']\r\n  if(req.body.bulkcontractitemsupdate.editcontractitem.originId)\r\n  sendData[i]['originId']  = req.body.bulkcontractitemsupdate.editcontractitem.originId\r\n  if(req.body.bulkcontractitemsupdate.editcontractitem.qualityId)\r\n  sendData[i]['qualityId']  = req.body.bulkcontractitemsupdate.editcontractitem.qualityId\r\n  if(req.body.bulkcontractitemsupdate.editcontractitem.priceContractDefId)\r\n  sendData[i]['priceContractDefId']  = req.body.bulkcontractitemsupdate.editcontractitem.priceContractDefId\r\n  if(req.body.bulkcontractitemsupdate.editcontractitem.basisPriceUnitId)\r\n  sendData[i]['basisPriceUnitId']  = req.body.bulkcontractitemsupdate.editcontractitem.basisPriceUnitId\r\n  if(req.body.bulkcontractitemsupdate.editcontractitem.pricingInstrument)\r\n  sendData[i]['pricingInstrument']  = req.body.bulkcontractitemsupdate.editcontractitem.pricingInstrument\r\n  if(req.body.bulkcontractitemsupdate.editcontractitem.periodType)\r\n  sendData[i]['periodType']  = req.body.bulkcontractitemsupdate.editcontractitem.periodType\r\n  if(req.body.bulkcontractitemsupdate.editcontractitem.deliveryPeriodFromDate)\r\n  sendData[i]['periodToDate']  =moment(req.body.bulkcontractitemsupdate.editcontractitem.deliveryPeriodFromDate).format('YYYY-MM-DD')+ 'T18:30:00.000+0000';\r\n  if(req.body.bulkcontractitemsupdate.editcontractitem.deliveryPeriodToDate)\r\n  sendData[i]['periodFromDate']  = moment(req.body.bulkcontractitemsupdate.editcontractitem.deliveryPeriodToDate).format('YYYY-MM-DD')+ 'T18:30:00.000+0000';\r\n  if(req.body.bulkcontractitemsupdate.editcontractitem.contractRefNo)\r\n  sendData[i]['contractRefNo']  = req.body.bulkcontractitemsupdate.editcontractitem.contractRefNo\r\n  if(req.body.bulkcontractitemsupdate.editcontractitem.basisPrice)\r\n  sendData[i]['basisPrice']  = req.body.bulkcontractitemsupdate.editcontractitem.basisPrice\r\n  }\r\n  defaultdata1.body = sendData\r\n  get_defaultData1().then(function (ctrm) {\r\n    res.status(200).send(ctrm);\r\n  }).catch(function (err) {\r\n    console.log(err);\r\n    res.status(500).send(err);\r\n  });",
    "sys__UUID" : "c0f106d4-8bae-4ff4-a8f1-5f9bc654d91a",
    "sys__createdBy" : "avinash.singh@ekaplus.com",
    "type" : "processor"
}
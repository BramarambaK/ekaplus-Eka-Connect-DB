{
    "_id" : "bulkcontractsupdate_processor",
    "name" : "bulkcontractsupdate",
    "type" : "processor",
    "refType" : "app",
    "refTypeId" : "5d907cd2-7785-4d34-bcda-aa84b2158415",
    "snippet" : "let flag = false;\r\n   let flagForQty = false;\r\n   let executeQty = req.body.queryParams.executedQty;\r\n   let incoTerm = req.body.queryParams.incoTerm;\r\n   let cpName = req.body.queryParams.cpName;\r\n   let payTerm = req.body.queryParams.payTerm;\r\n   if(Array.isArray(executeQty)){\r\n    for(let i=0; i < executeQty.length; i++){\r\n         if(executeQty[i] > 0){\r\n           flagForQty = true;\r\n             break;\r\n         }\r\n    }\r\n   }\r\n   if(Array.isArray(incoTerm)){\r\n       for(let i=0; i < incoTerm.length-1; i++){\r\n            if(incoTerm[i] != incoTerm[i+1]){\r\n                flag = true;\r\n                break;\r\n            }\r\n       }\r\n   }\r\n   if(Array.isArray(cpName)){\r\n    for(let i=0; i < cpName.length-1; i++){\r\n         if(cpName[i] != cpName[i+1]){\r\n             flag = true;\r\n             break;\r\n         }\r\n    }\r\n   }\r\n   if(Array.isArray(payTerm)){\r\n    for(let i=0; i < payTerm.length-1; i++){\r\n         if(payTerm[i] != payTerm[i+1]){\r\n             flag = true;\r\n             break;\r\n         }\r\n    }\r\n   }\r\n   if(flag){\r\n         res.status(500).send(\"Please select contracts having same CP, INCO Term and Payment Term\");\r\n   }\r\n   if(flagForQty){\r\n         res.status(500).send(\"Executed contracts are not allowed amend in bulk\");\r\n   }\r\n   let contracts = req.body.queryParams;\r\n   let arr = [];\r\n   if(typeof contracts === 'object'){\r\n   let key1 = \"\";\r\n    for(let key in contracts){\r\n         if(Array.isArray(contracts[key])){\r\n               key1 = key;\r\n               break;\r\n         }\r\n    }\r\n    for(let i=0; i< contracts[key1].length; i++){\r\n        let obj ={};\r\n         for(let key in contracts){\r\n           obj[key] = contracts[key][i] ? contracts[key][i] : \"\";\r\n         }\r\n         arr.push(obj);\r\n    }\r\n }\r\n    res.status(200).send({\r\n        listingcontract: arr,\r\n        editcontract:{'amendmentDate' : new Date(),\r\n\t\t'amendmentReason':null,\r\n\t\t'cpName' : null,\r\n\t\t'incoTerm':null,\r\n\t\t'payTerm' : null\r\n\t\t}\r\n    })",
    "sys__UUID" : "4c525236-0b3a-4327-9f0b-e88a57b6d5dd"
}
{
    "_id" : "inventory_notifycreate_processor",
    "name" : "inventory_notifycreate_processor",
    "type" : "processor",
    "refType" : "app",
    "refTypeId" : "12325a98-a959-4939-9005-4158d136afcd",
    "snippet" : "function getStackAverage(product, stackAverage) {\r\n  var stackAverageSplit = stackAverage.split(',');\r\n  var stackAverageArray = [];\r\n  for (var i = 0; i < stackAverageSplit.length; i++) {\r\n    var strStackAverage = stackAverageSplit[i].trim();\r\n    if (product == 'Wheat' || product == 'Barley') {\r\n      if (strStackAverage.includes('PRGR') || strStackAverage.includes('SCN2.2') || strStackAverage.includes('TWT')) {\r\n        stackAverageArray.push(strStackAverage);\r\n      }\r\n    } else if (product == 'Canola') {\r\n      if (strStackAverage.includes('COIL') || strStackAverage.includes('ADM') || strStackAverage.includes('TWT')) {\r\n        stackAverageArray.push(strStackAverage);\r\n      }\r\n    } else {\r\n      if (strStackAverage.includes('PRGR') || strStackAverage.includes('ADM') || strStackAverage.includes('TWT')) {\r\n        stackAverageArray.push(strStackAverage);\r\n      }\r\n    }\r\n  }\r\n  stackAverageArray.sort();\r\n  return stackAverageArray.toString();\r\n}\r\n\r\nlet data = req.body.bulkPayLoadData;\r\nif (data) {\r\n  for (var i = 0; i < data.length; i++) {\r\n    var record = data[i];\r\n    var product = record.product;\r\n    if (typeof record.stackAverage === \"undefined\" || record.stackAverage === null || record.stackAverage.length === 0 || record.stackAverage.trim() === \"\") {\r\n\t\trecord.stackAverageOriginal = record.stackAverage;\r\n    \trecord.stackAverage = '-';\r\n    } else if (record.stackAverage && record.stackAverage.length > 0) {\r\n    \trecord.stackAverageOriginal = record.stackAverage;\r\n    \trecord.stackAverage = getStackAverage(product, record.stackAverage);\r\n    }\r\n  }\r\n  res.status(200).send(data);\r\n}\r\n",
    "sys__UUID" : "e8e732b9-4914-4b87-b1d6-ef3111f6d52a"
}
{
    "_id" : "Initial_Processor_for_rollforwarddate_LP",
    "name" : "Initial_Processor_for_rollforwarddate_LP",
    "type" : "processor",
    "refType" : "app",
    "refTypeId" : "d88e9a79-c0cc-4c28-bb01-ee56ff33048e",
    "snippet" : "const moment = require('moment');\r\nfunction getForwardDate(res){\r\n    if(res.liquidityPlanPeriod && res.planEndDate && res.planEndDateHidden && res.planStartDate && res.planStartDateHidden){\r\n        if(res.liquidityPlanPeriod == 'Daily') {\r\n         let forwardStartDate = moment(res.planStartDate).add(14, \"days\").format('YYYY-MM-DD');\r\n         let forwardEndDate = moment(res.planEndDate).add(14, \"days\").format('YYYY-MM-DD');\r\n         if(forwardStartDate >= res.planStartDateHidden && forwardStartDate <= res.planEndDateHidden && forwardEndDate >= res.planStartDateHidden && forwardEndDate <= res.planEndDateHidden){\r\n            res.planStartDate = forwardStartDate;\r\n            res.planEndDate = forwardEndDate;\r\n          }\r\n\r\n        }\r\n        if(res.liquidityPlanPeriod == 'Monthly') {\r\n            let forwardStartDate = moment(res.planStartDate).add(11, \"months\").add(1, 'days').format('YYYY-MM-DD');\r\n            let forwardEndDate = moment(res.planEndDate).add(11, \"months\").add(1, 'days').format('YYYY-MM-DD');\r\n            if(forwardStartDate >= res.planStartDateHidden && forwardStartDate <= res.planEndDateHidden && forwardEndDate >= res.planStartDateHidden && forwardEndDate <= res.planEndDateHidden){\r\n                res.planStartDate = forwardStartDate;\r\n                res.planEndDate = forwardEndDate;\r\n              }\r\n   \r\n           }\r\n           if(res.liquidityPlanPeriod == 'Weekly') {\r\n             let forwardStartDate = moment(res.planStartDate).add(12, \"weeks\").add(1, 'days').format('YYYY-MM-DD');\r\n            let forwardEndDate = moment(res.planEndDate).add(12, \"weeks\").add(1, 'days').format('YYYY-MM-DD');\r\n            if(forwardStartDate >= res.planStartDateHidden && forwardStartDate <= res.planEndDateHidden && forwardEndDate >= res.planStartDateHidden && forwardEndDate <= res.planEndDateHidden){\r\n                res.planStartDate = forwardStartDate;\r\n                res.planEndDate = forwardEndDate;\r\n              }\r\n   \r\n           }\r\n    }\r\n    return res;\r\n}\r\nlet response = req.body.activityData;\r\nlet formattedResponse = getForwardDate(response);\r\nres.status(200).send({...formattedResponse})",
    "sys__UUID" : "3a871649-dc3b-44f2-9dd0-c17425c9574d"
}
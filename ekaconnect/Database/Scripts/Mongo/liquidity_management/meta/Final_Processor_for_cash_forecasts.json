{
    "_id" : "Final_Processor_for_edit_cash_forecasts",
    "name" : "Final_Processor_for_edit_cash_forecasts",
    "type" : "processor",
    "refType" : "app",
    "refTypeId" : "d88e9a79-c0cc-4c28-bb01-ee56ff33048e",
    "snippet" : "\r\nvar moment = require('moment');\r\nfunction findbody(data) {\r\n  return {\r\n\t  liquidityPlanName: data.liquidityPlanName,\r\n\t  bankId: data.hasOwnProperty('bankId')?data.bankId:null,\r\n\t  bankAccount: data.hasOwnProperty('bankAccount')?data.bankAccount:null,\r\n\t  entity: data.entity,\r\n\t  transactionDate: moment(data.transactionDate).format('YYYY-MM-DD'),\r\n\t  currency: data.hasOwnProperty('currency')?data.currency:null,\t  \r\n\t  amount: data.hasOwnProperty('amount')?data.amount:null,  \r\n\t  classification: data.hasOwnProperty('classification')?data.classification:null,\r\n\t  direction: data.hasOwnProperty('direction')?data.direction:null,\r\n\t  strategy: data.hasOwnProperty('strategy')?data.strategy:null,\r\n\t  profileCenter: data.hasOwnProperty('profileCenter')?data.profileCenter:null,\r\n\t  externalRefNo: data.hasOwnProperty('externalRefNo')?data.externalRefNo:null,\r\n\t  remarks: data.remarks,\r\n\t  status: data.status  \r\n  };\r\n}\r\nvar ekacashforecast =\r\n  req.body.propertyList.platform_url + '\/spring\/liquidityManagement\/forecast\/' + req.body.forecastId;\r\nvar ekacashforecasturl = {\r\n  method: 'PUT',\r\n  url: ekacashforecast,\r\n  body: findbody(req.body),\r\n  headers: {\r\n\tAuthorization: req.headers.authorization,\r\n\t'Content-Type': 'application\/json'\r\n  },\r\n  json: true\r\n};\r\nvar get_platformEkaCashForecastUrl = function get_platformEkaCashForecastUrl() {\r\n  return new Promise(function(resolve, reject) {\r\n\trequest(ekacashforecasturl, function(err, response, body) {\t\r\n\t  if (response.statusCode >= 200 && response.statusCode <= 299) {\r\n\t\tresolve(body);\r\n\t  } else {\r\n\t\treject(body);\r\n\t  }\r\n\t});\r\n  });\r\n};\r\n\/* if(!req.body.hasOwnProperty('amount')){\r\n  res.status(500).send('Please Fill the Amount')\r\n}*\/\r\nget_platformEkaCashForecastUrl()\r\n  .then(function(ent) {\r\n\tres.status(200).send({ msg: 'Cash Forecast Updated Successfully' });\r\n  })\r\n  .catch(err => {\r\n\tconsole.error(err);\r\n\tres.status(500).send({ msg: 'failed to update' });\r\n  });\r\n",
    "sys__UUID" : "c8cbd1d9-be9d-478e-ae49-fd66796b5513",
    "sys__createdBy" : "avinash"
}
{
    "_id" : "Initial_Processor_for_cashForecast_status_log",
    "name" : "Initial_Processor_for_cashForecast_status_log",
    "type" : "processor",
    "refType" : "app",
    "refTypeId" : "d88e9a79-c0cc-4c28-bb01-ee56ff33048e",
    "snippet" : "\r\n    var moment = require('moment');\r\n    let selected = req.body.hasOwnProperty('selectedData') ? req.body.selectedData : {};\r\n    var statusLogUrl = req.body.propertyList.platform_url + '\/spring\/liquidityManagement\/bulkProcessStatusLog?processType=Forecast';\r\n\r\n    var platformEntityStatusLogData = {\r\n      method: 'GET',\r\n      url: statusLogUrl,\r\n      headers: {\r\n        Authorization: req.headers.authorization,\r\n        'Content-Type': 'application\/json',\r\n        'X-TenantID': req.headers['x-tenantid']\r\n      },\r\n      json: true\r\n    };\r\n    var get_platformEntityStatusLogData = function get_platformEntityStatusLogData() {\r\n      return new Promise(function(resolve, reject) {\r\n        request(platformEntityStatusLogData, function(err, response, body) {\r\n          if (response.statusCode >= 200 && response.statusCode <= 299) {\r\n            resolve(body);\r\n          } else {\r\n            reject(body);\r\n          }\r\n        });\r\n      });\r\n    };\r\n    \r\n    get_platformEntityStatusLogData()\r\n      .then(function(ent) {\r\n        Promise.all([get_platformEntityStatusLogData()])\r\n          .then(results => {\r\n            let statusLog = [];\r\n            for (let i = 0; i < results[0].length; i++) {\r\n\t\t\t  statusLog[i] = results[0][i];\r\n\t\t\t  statusLog[i]['processID'] = statusLog[i]['c1'];\r\n\t\t\t  statusLog[i]['totalRecords'] = statusLog[i]['c2'];\r\n\t\t\t  statusLog[i]['successfulRecords'] = statusLog[i]['c3'];\r\n\t\t\t  statusLog[i]['failedRecords'] = statusLog[i]['c4'];\r\n\t\t\t  statusLog[i]['status'] = statusLog[i]['c5'];\r\n\t\t\t  statusLog[i]['createdBy'] = statusLog[i]['c6'];\r\n\t\t\t  statusLog[i]['createdDate'] = moment(statusLog[i]['c7']).format('DD-MMM-YYYY');  \r\n            }\r\n            res.status(200).send([...statusLog]);\r\n          })\r\n          .catch(err => {\r\n            res.status(500).send(err);\r\n          });\r\n      })\r\n      .catch(err => {\r\n        res.status(500).send(err);\r\n      });\r\n  ",
    "sys__UUID" : "ae6c1d38-eb7e-480f-9e71-de247725cc27",
    "sys__createdBy" : "Jay"
}
{
    "_id" : "Final_Processor_for_edit_bank_transaction",
    "name" : "Final_Processor_for_edit_bank_transaction",
    "type" : "processor",
    "refType" : "app",
    "refTypeId" : "e4ba81fc-1304-4f01-b641-7425da52a666",
    "snippet" : "var moment = require('moment');\r\nfunction findbody(data) {\r\n  return {\r\n\t  bankID: data.hasOwnProperty('bankID')?data.bankID:null,\r\n\t  currencyCode: data.hasOwnProperty('currencyCode')?data.currencyCode:null,\r\n\t  accountNumber: data.hasOwnProperty('accountNumber')?data.accountNumber:null,\r\n\t  transactionAmount: Number(data.transactionAmount),\r\n\t  valueDate: moment(data.valueDate).format('YYYY-MM-DD'),\r\n\t  direction: data.direction,\r\n\t  entity:data.entity,\r\n\t  comments: data.comments,\r\n\t  classification: data.classification,\r\n\t  transactionRefNo: data.transactionRefNo,\r\n\t  bankName: data.bankName,\r\n\t  status: data.status  \r\n  };\r\n}\r\nvar ekabanktransaction =\r\n  req.body.propertyList.platform_url + '\/spring\/cashManagement\/transaction\/' + req.body.transactionRefNo;\r\nvar ekabanktransactionurl = {\r\n  method: 'PUT',\r\n  url: ekabanktransaction,\r\n  body: findbody(req.body),\r\n  headers: {\r\n\tAuthorization: req.headers.authorization,\r\n\t'Content-Type': 'application\/json'\r\n  },\r\n  json: true\r\n};\r\nvar get_platformEkaBankTransactionUrl = function get_platformEkaBankTransactionUrl() {\r\n  return new Promise(function(resolve, reject) {\r\n\trequest(ekabanktransactionurl, function(err, response, body) {\t\r\n\t  if (response.statusCode >= 200 && response.statusCode <= 299) {\r\n\t\tresolve(body);\r\n\t  } else {\r\n\t\treject(body);\r\n\t  }\r\n\t});\r\n  });\r\n};\r\n if(!req.body.hasOwnProperty('transactionAmount')){\r\n res.status(500).send('Please fill the Amount (mandatory)')\r\n    }\r\n get_platformEkaBankTransactionUrl()\r\n  .then(function(ent) {\r\n\tres.status(200).send({ msg: 'Bank Transaction Updated Successfully' });\r\n  })\r\n  .catch(err => {\r\n\tconsole.error(err);\r\n\tlet message = 'Failed to update';\r\n\tres.status(500).send(message);\r\n  });\r\n",
    "sys__UUID" : "fcd8c786-3dcd-4a3b-ad90-39c44e94b100",
    "sys__createdBy" : "jay"
}
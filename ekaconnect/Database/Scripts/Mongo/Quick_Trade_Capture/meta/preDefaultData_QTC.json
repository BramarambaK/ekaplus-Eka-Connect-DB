{
    "_id" : "PreDefaultData_QTC",
    "name" : "preDefaultData",
    "type" : "processor",
    "refType" : "app",
    "refTypeId" : "5d907cd2-7785-4d34-bcda-aa84b2158415",
    "snippet" : "if(!req.body.traderUserId==''){\r\n    var defaultDataURL =\r\n    req.body.propertyList.eka_connect_host + '\/workflow\/data?traderUserId='+req.body.selectedData.traderUserId;\r\n    var dbody = {\r\n      \"appId\":req.body.appId,\r\n      \"workFlowTask\":\"defaultdataCOPY\"\r\n    }\r\n    var defaultdata = {\r\n      method: 'POST',\r\n      url: defaultDataURL,\r\n      body:dbody,\r\n      headers: {\r\n        Authorization: req.headers.authorization,\r\n        'X-TenantID': req.headers['x-tenantid']\r\n      },\r\n      json: true\r\n    };\r\n    function get_defaultData() {\r\n      return new Promise(function(resolve, reject) {\r\n        request(defaultdata, function(err, response, body) {\r\n          if (err || body.error) reject(body);\r\n          else {\r\n            resolve(body);\r\n          }\r\n        });\r\n      });\r\n    }\r\n    if(req.headers.hasOwnProperty('device-id')){\r\n        defaultdata.headers['Device-Id'] = req.headers['device-id']\r\n      }\r\n    Promise.all([get_defaultData()]).then(function(result) {\r\n           if(result[0].data.length > 0)\r\n          var data = result[0].data[0];\r\n          else var data = {\r\n            'shipmentMode': '',\r\n                     'applicableLawId':'',\r\n            'arbitrationId':'',\r\n            'taxScheduleCountryId':'',\r\n  'traderUserId':req.body.traderUserId,\r\n           'taxScheduleId':'',\r\n            'strategyAccId':'',\r\n            'profitCenterId':'',\r\n            'paymentTermId':'',\r\n            'paymentDueDate':'',\r\n            'tolerance':'',\r\n            'toleranceLevel':'',\r\n            'toleranceType':''\r\n          };\r\n          \r\n          \r\n          res.status(200).send(data)\r\n           });\r\n          }\r\n          else  res.status(500).send('Please fill the trader name')\r\n",
    "sys__UUID" : "0f7aac34-682f-4c5d-9d83-fad7d1044287",
    "sys__createdOn" : ISODate("2019-05-22T09:51:04.600Z"),
    "sys__createdBy" : "srini@ekaplus.com"
}
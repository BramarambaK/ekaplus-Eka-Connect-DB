{
    "_id" : "defaultExtProccesor_QTC",
    "name" : "defaultExtProccesor",
    "type" : "processor",
    "refType" : "app",
    "refTypeId" : "5d907cd2-7785-4d34-bcda-aa84b2158415",
    "snippet" : " if (!req.body.traderUserId == '') {\r\n      var defaultDataURL =\r\n        req.body.propertyList.eka_connect_host + '\/workflow\/data?traderUserId=' + req.body.traderUserId;\r\n      var dbody = {\r\n        appId: req.body.appId,\r\n        workFlowTask: 'defaultdataCOPY'\r\n      };\r\n      var defaultdata = {\r\n        method: 'POST',\r\n        url: defaultDataURL,\r\n        body: dbody,\r\n        headers: {\r\n          Authorization: req.headers.authorization,\r\n          'X-TenantID': req.headers['x-tenantid']\r\n        },\r\n        json: true\r\n      };\r\n      function get_defaultData() {\r\n        return new Promise(function(resolve, reject) {\r\n          request(defaultdata, function(err, response, body) {\r\n            if (err || body.error) reject(body);\r\n            else {\r\n              resolve(body);\r\n            }\r\n          });\r\n        });\r\n      }\r\n  if(req.headers.hasOwnProperty('device-id')){\r\n        defaultdata.headers['Device-Id'] = req.headers['device-id']\r\n      }\r\n\r\n      Promise.all([get_defaultData()]).then(function(result) {\r\n        if (result[0].data.length > 0) var data = result[0].data[0];\r\n        else\r\n          var data = {\r\n            shipmentMode: '',\r\n            traderUserId: req.body.traderUserId,\r\n            applicableLawId: '',\r\n            arbitrationId: '',\r\n            taxScheduleCountryId: '',\r\n            taxScheduleId: '',\r\n            strategyAccId: '',\r\n             taxScheduleStateId:'',\r\n            profitCenterId: '',\r\n            paymentTermId: '',\r\n            paymentDueDate: '',\r\n            toleranceMin: '',\r\n\t\t\t toleranceMax: '',\r\n            toleranceLevel: '',\r\n            toleranceType: ''\r\n          };\r\n\r\n        res.status(200).send(data);\r\n      });\r\n    } else res.status(200).send({\r\n        shipmentMode: '',\r\n        traderUserId: '',\r\n        applicableLawId: '',\r\n        arbitrationId: '',\r\n        taxScheduleCountryId: '',\r\n        taxScheduleId: '',\r\n        strategyAccId: '',\r\n        taxScheduleStateId:'',\r\n        profitCenterId: '',\r\n        paymentTermId: '',\r\n        paymentDueDate: '',\r\n        toleranceMin: '',\r\n        toleranceMax: '',\r\n        toleranceLevel: '',\r\n        toleranceType: ''\r\n      });",
    "sys__UUID" : "cca84124-acc0-4c2d-aca0-0762e78293fe",
    "sys__createdBy" : "srini@ekaplus.com"
}
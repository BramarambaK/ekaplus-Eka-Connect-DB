{
    "_id": "deletecustomizeddocuments_enablecurve_processor",
    "name": "Delete Customized Documents",
    "type": "processor",
    "refType": "app",
    "refTypeId": "d33143ac-4164-4a3f-8d30-61d845c9eeed",
    "snippet": "var refType;\r\nvar refTypeId;\r\nvar _id;\r\nvar docsList = [\r\n  {\r\n    refType: \"object\",\r\n    refTypeId: \"00189ca9-cfc1-4327-95ac-f937f22deb60\",\r\n    _id: \"customizedDocument_draftcostestimate_object_alvean\",\r\n  },\r\n  {\r\n    refType: \"object\",\r\n    refTypeId: \"f3d6ff89-b541-4dc0-b88d-12065d10cc90\",\r\n    _id: \"customizedDocument_costestimate_object_alvean\",\r\n  },\r\n  {\r\n    refType: \"object\",\r\n    refTypeId: \"3fc4f79b-3f25-4cb8-a62a-7d36e13bf045\",\r\n    _id: \"customizedDocument_tempcostestimate_object_alvean\",\r\n  },\r\n  {\r\n    refType: \"workflow\",\r\n    refTypeId: \"96630e66-691a-49de-8c14-b8dd885417c9\",\r\n    _id: \"customizedDocument_costitemsfornewentity_workflow_alvean\",\r\n  },\r\n  {\r\n    refType: \"workflow\",\r\n    refTypeId: \"ce29db11-6fe4-497b-b5f1-9702d1592b77\",\r\n    _id: \"customizedDocument_editdraftcostestimate_workflow_alvean\",\r\n  },\r\n  {\r\n    refType: \"workflow\",\r\n    refTypeId: \"d791e2b4-055c-42d6-aba0-a9c6c50b2cd0\",\r\n    _id: \"customizedDocument_costitemsforexistingentity_workflow_alvean\",\r\n  },\r\n  {\r\n    refType: \"workflow\",\r\n    refTypeId: \"bde55bd7-507f-4464-9f30-8eee881fa047\",\r\n    _id: \"customizedDocument_editcostestimate_workflow_alvean\",\r\n  },\r\n  {\r\n    refType: \"workflow\",\r\n    refTypeId: \"99efd304-3a76-4d17-935a-9f4a2d2a75fd\",\r\n    _id: \"customizedDocument_edittempcostestimate_workflow_alvean\",\r\n  },\r\n  {\r\n    refType: \"workflow\",\r\n    refTypeId: \"72e6b52a-c40c-4d57-93c2-4e4444399791\",\r\n    _id: \"customizedDocument_useexistingpbsedit_workflow_alvean\",\r\n  },\r\n  {\r\n    refType: \"workflow\",\r\n    refTypeId: \"4adf43ac-c5c5-4e33-82cd-69e09bedd02e\",\r\n    _id: \"customizedDocument_copydraftcostestimate_workflow_alvean\",\r\n  },\r\n  {\r\n    refType: \"workflow\",\r\n    refTypeId: \"1b51ba9b-4b04-4a44-9613-a6ac431d8dee\",\r\n    _id: \"customizedDocument_copycostestimate_workflow_alvean\",\r\n  },\r\n];\r\nvar deleteCustomizedDocument = {\r\n  method: \"DELETE\",\r\n  url: req.body.propertyList.eka_connect_host + \"\/meta\/customizedDocument\",\r\n  headers: {\r\n    \"Content-Type\": \"application\/json\",\r\n    Authorization: req.headers.authorization,\r\n    \"X-TenantID\": req.headers[\"x-tenantid\"],\r\n  },\r\n  json: true,\r\n};\r\nfunction delete_customizedDocument() {\r\n  return new Promise(function (resolve, reject) {\r\n    request(deleteCustomizedDocument, function (err, response, body) {\r\n      if (err || (body && body.error)) reject(body);\r\n      else {\r\n        resolve(body);\r\n      }\r\n    });\r\n  });\r\n}\r\nrefType = docsList[0].refType;\r\nrefTypeId = docsList[0].refTypeId;\r\n_id = docsList[0][\"_id\"];\r\ndeleteCustomizedDocument.url =\r\n  req.body.propertyList.eka_connect_host +\r\n  `\/meta\/customizedDocument\/${refType}\/${refTypeId}\/${_id}?customizeLevel=system`;\r\ndelete_customizedDocument().then(async (result) => {\r\n  var id = [];\r\n  if (result && result.errorCode) id.push(result);\r\n  else id.push(`${_id} deleted`);\r\n  for (var i = 1; i < docsList.length; i++) {\r\n    refType = docsList[i].refType;\r\n    refTypeId = docsList[i].refTypeId;\r\n    _id = docsList[i][\"_id\"];\r\n    deleteCustomizedDocument.url =\r\n      req.body.propertyList.eka_connect_host +\r\n      `\/meta\/customizedDocument\/${refType}\/${refTypeId}\/${_id}?customizeLevel=system`;\r\n    await delete_customizedDocument().then(function (data) {\r\n      if (data && data.errorCode) id.push(data);\r\n      else id.push(`${_id} deleted`);\r\n    });\r\n  }\r\n  res.status(200).send(id);\r\n});\r\n",
    "sys__UUID": "0aa7b981-5964-4cdd-9629-c573a2619c24"
  }
  
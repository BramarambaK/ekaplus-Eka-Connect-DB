{
    "_id" : "_SETAPPROVAL_INCOMPLETEREASON_DATA_",
    "name" : "_SETAPPROVAL_INCOMPLETEREASON_DATA_",
    "type" : "processor",
    "refType" : "app",
    "refTypeId" : "467a28cc-bc93-4e38-8ff5-0a56ae128f3b",
    "snippet" : "\r\n    \/\/ INCOMPLETE Reason {added in files}\r\n    let selectedData = req.body;\r\n    var materialClassification = {\r\n      method: 'POST',\r\n      url:\r\n        req.body.propertyList.eka_connect_host +\r\n        '\/collectionmapper\/467a28cc-bc93-4e38-8ff5-0a56ae128f3b\/c05cacf5-200c-4d97-8e8d-a67329ff286c\/fetchCollectionRecords',\r\n      headers: {\r\n        'Content-Type': 'application\/json',\r\n        'X-TenantID': req.headers['x-tenantid'],\r\n        Authorization: req.headers.authorization,\r\n        ttl: 300\r\n      },\r\n      body: {\r\n        collectionName: 'Approve GMR LOV',\r\n        criteria: {\r\n          filter: [\r\n            {\r\n              fieldName: 'Component',\r\n              value: 'Incomplete Reason',\r\n              operator: 'eq'\r\n            }\r\n          ]\r\n        }\r\n      },\r\n      json: true\r\n    };\r\n\r\n    function getMaterialClassification() {\r\n      return new Promise(function(resolve, reject) {\r\n        console.log('Request - ' + materialClassification.url);\r\n        console.log('Payload -' + JSON.stringify(materialClassification));\r\n        request(materialClassification, function(err, response, body) {\r\n          console.log('Request Body - ' + JSON.stringify(body));\r\n          if (response.statusCode >= 200 && response.statusCode <= 299) {\r\n            console.log('Success');\r\n            resolve(body);\r\n          } else {\r\n            console.log(body.error);\r\n            reject(err || body);\r\n          }\r\n        });\r\n      });\r\n    }\r\n    getMaterialClassification().then(data => {\r\n      data = data.reduce((acc, item) => {\r\n        acc.push({\r\n          key: item.Value,\r\n          value: item.Value\r\n        });\r\n        return acc;\r\n      }, []);\r\n      return res.status(200).send({\r\n        gmrIncompleteReason: [...data]\r\n      });\r\n    });\r\n  ",
    "sys__UUID" : "d904fdf2-8407-4499-85cc-79e33565c9df"
}
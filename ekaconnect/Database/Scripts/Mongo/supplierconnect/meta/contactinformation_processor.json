{
    "_id" : ObjectId("5da6ee4d0ba30888f7767bce"),
    "name" : "contactinformation",
    "type" : "processor",
    "refType" : "app",
    "refTypeId" : "467a28cc-bc93-4e38-8ff5-0a56ae128f3b",
    "snippet" : "var collection = {\r\n    method: 'POST',\r\n    url: req.body.propertyList.eka_connect_host + '/collectionmapper/' + req.body.appId + '/'+ 'ebd7a28b-9a12-437c-a09c-052650fe7a19' + '/fetchCollectionRecords',\r\n    headers: {\r\n      Authorization: req.headers.authorization,\r\n      'X-TenantID': req.headers['x-tenantid'],\r\n\t  'Content-Type':'application/json',\r\n\t  'Ttl':5\r\n    },\r\n    body: {\r\n\t  \"collectionName\": \"Contact_Information\",\r\n      \"start\": \"0\",\r\n      \"limit\": \"50\",\r\n      \"criteria\": {}\r\n\t},\r\n    json: true\r\n  };\r\n\r\n  function get_Collection() {\r\n    return new Promise(function(resolve, reject) {\r\n      console.log('Request - ' + collection.url);\r\n      console.log('Payload -' + JSON.stringify(collection));\r\n      request(collection, function(err, response, body) {\r\n        console.log('Response - ' + JSON.stringify(body));\r\n        if (err || body.error) reject(body);\r\n        else {\r\n          console.log('Success');\r\n          resolve(body);\r\n        }\r\n      });\r\n    });\r\n  }\r\n  \r\n  get_Collection().then(function(result){\r\n      for(let i=0; i < result.length; i++){\r\n    if(!result[i]['Contact Information 1']){\r\n        result[i]['Contact Information'] = result[i]['Function'];\r\n         delete result[i]['Function'];\r\n          result[i]['__class']=\"font-weight\"; \r\n          continue;\r\n    }else{\r\n       result[i]['__class']=\"no-top-bottom-padding\";\r\n    }\r\n    if(result[i]['Contact Information 1']){\r\n         delete result[i]['Function'];\r\n    }\r\n    if(i >0 && result[i]['Contact Information']){\r\n       for(let j=i; j < result.length; j++){\r\n                if(!result[j]['Contact Information 1']){\r\n                    break;\r\n                }\r\n              if(i!=j && result[i]['Contact Information'] == result[j]['Contact Information']){\r\n                  result[j]['Contact Information']=\"\";\r\n                  result[i]['__class']= \"padding-top-10 no-top-bottom-padding\";\t\t\t\t\t\t\r\n              }\r\n       }\r\n    }    \r\n}\r\n      res.status(200).send(result);\r\n  })",
    "sys__UUID" : "ba314fcf-5b20-40f1-9a03-622720012f4e"
}
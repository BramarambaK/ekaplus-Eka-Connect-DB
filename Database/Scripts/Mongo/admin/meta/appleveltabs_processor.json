{
  "_id": ObjectId("5d28660210f7f68b939618d3"),
  "name": "appleveltabs",
  "type": "processor",
  "refType": "app",
  "refTypeId": "admin",
  "snippet": "var tabCheck = false;\r\nvar appId = req.body.selectedData.appId;\r\nvar seeded_apps_tabs = req.body.propertyList.seeded_apps_tabs;\r\nif (req.body.propertyList.seeded_apps.indexOf(appId) > -1) {\r\n  tabCheck = true;\r\n}\r\nvar platform = {\r\n  method: \"GET\",\r\n  url: req.body.propertyList.platform_url + \"/spring/permcodes/\" + appId,\r\n  headers: {\r\n    Authorization: req.headers.authorization,\r\n  },\r\n  json: true,\r\n};\r\nfunction get_platform() {\r\n  return new Promise(function (resolve, reject) {\r\n    console.log(\"Request - \" + platform.url);\r\n    console.log(\"Payload -\" + JSON.stringify(platform));\r\n    request(platform, function (err, response, body) {\r\n      console.log(\"Request Body - \" + JSON.stringify(body));\r\n      if (err || body.error) reject(body);\r\n      else {\r\n        resolve(body);\r\n      }\r\n    });\r\n  });\r\n}\r\nget_platform()\r\n  .then((permCodes) => {\r\n    var codes = permCodes.permCodes;\r\n    var data = {};\r\n    if (!tabCheck || seeded_apps_tabs.indexOf(\"*\") > -1) {\r\n      if (\r\n        codes.indexOf(\"STD_APP_WORKFLOW_GENERAL_SETTINGS\") > -1 ||\r\n        codes.indexOf(\"APPS_EDIT\") > -1\r\n      ) {\r\n        data.showGeneral = true;\r\n        data.showHealthcheck = true;\r\n        data.showNlp = true;\r\n        data.showConfig = true;\r\n        data.showScheduler = true;\r\n        data.showAsyncTasks = true;\r\n      }\r\n      if (\r\n        codes.indexOf(\"STD_APP_WORKFLOW_MENU_SETTINGS\") > -1 ||\r\n        codes.indexOf(\"APPS_EDIT\") > -1\r\n      )\r\n        data.showMenu = true;\r\n      if (\r\n        codes.indexOf(\"STD_APP_WORKFLOW_SECURITY_SETTINGS\") > -1 ||\r\n        codes.indexOf(\"APPS_SECURITY\") > -1\r\n      )\r\n        data.showSecurity = true;\r\n      if (\r\n        codes.indexOf(\"STD_APP_WORKFLOW_WORKFLOW_SETTINGS\") > -1 ||\r\n        codes.indexOf(\"APPS_EDIT\") > -1\r\n      )\r\n        data.showWorkflow = true;\r\n      if (\r\n        codes.indexOf(\"STD_APP_WORKFLOW_PROPERTY_SETTINGS\") > -1 ||\r\n        codes.indexOf(\"APPS_EDIT\") > -1\r\n      )\r\n        data.showProperty = true;\r\n      if (\r\n        codes.indexOf(\"STD_APP_WORKFLOW_PROCESSOR_SETTINGS\") > -1 ||\r\n        codes.indexOf(\"APPS_EDIT\") > -1\r\n      )\r\n        data.showProcessor = true;\r\n    } else if (tabCheck || seeded_apps_tabs.indexOf(\"*\") < 0) {\r\n      if (\r\n        seeded_apps_tabs.indexOf(\"GENERAL\") > -1 &&\r\n        (codes.indexOf(\"STD_APP_WORKFLOW_GENERAL_SETTINGS\") > -1 ||\r\n          codes.indexOf(\"APPS_EDIT\") > -1)\r\n      )\r\n        data.showGeneral = true;\r\n      if (\r\n        seeded_apps_tabs.indexOf(\"MENU\") > -1 &&\r\n        (codes.indexOf(\"STD_APP_WORKFLOW_MENU_SETTINGS\") > -1 ||\r\n          codes.indexOf(\"APPS_EDIT\") > -1)\r\n      )\r\n        data.showMenu = true;\r\n      if (\r\n        seeded_apps_tabs.indexOf(\"SECURITY\") > -1 &&\r\n        (codes.indexOf(\"STD_APP_WORKFLOW_SECURITY_SETTINGS\") > -1 ||\r\n          codes.indexOf(\"APPS_SECURITY\") > -1)\r\n      )\r\n        data.showSecurity = true;\r\n      if (\r\n        seeded_apps_tabs.indexOf(\"WORKFLOW\") > -1 &&\r\n        (codes.indexOf(\"STD_APP_WORKFLOW_WORKFLOW_SETTINGS\") > -1 ||\r\n          codes.indexOf(\"APPS_EDIT\") > -1)\r\n      )\r\n        data.showWorkflow = true;\r\n      if (\r\n        seeded_apps_tabs.indexOf(\"PROPERTY\") > -1 &&\r\n        (codes.indexOf(\"STD_APP_WORKFLOW_PROPERTY_SETTINGS\") > -1 ||\r\n          codes.indexOf(\"APPS_EDIT\") > -1)\r\n      )\r\n        data.showProperty = true;\r\n      if (\r\n        seeded_apps_tabs.indexOf(\"PROCESSOR\") > -1 &&\r\n        (codes.indexOf(\"STD_APP_WORKFLOW_PROCESSOR_SETTINGS\") > -1 ||\r\n          codes.indexOf(\"APPS_EDIT\") > -1)\r\n      )\r\n        data.showProcessor = true;\r\n      if (\r\n        seeded_apps_tabs.indexOf(\"HEALTHCHECK\") > -1 &&\r\n        (codes.indexOf(\"STD_APP_WORKFLOW_GENERAL_SETTINGS\") > -1 ||\r\n          codes.indexOf(\"APPS_EDIT\") > -1)\r\n      )\r\n        data.showHealthcheck = true;\r\n      if (\r\n        seeded_apps_tabs.indexOf(\"ASYNCTASKSCHECK\") > -1 &&\r\n        (codes.indexOf(\"STD_APP_WORKFLOW_GENERAL_SETTINGS\") > -1 ||\r\n          codes.indexOf(\"APPS_EDIT\") > -1)\r\n      )\r\n        data.showAsyncTasks = true;\r\n      if (\r\n        seeded_apps_tabs.indexOf(\"NLP\") > -1 &&\r\n        (codes.indexOf(\"STD_APP_WORKFLOW_GENERAL_SETTINGS\") > -1 ||\r\n          codes.indexOf(\"APPS_EDIT\") > -1)\r\n      )\r\n        data.showNlp = true;\r\n      if (\r\n        seeded_apps_tabs.indexOf(\"CONFIG\") > -1 &&\r\n        (codes.indexOf(\"STD_APP_WORKFLOW_GENERAL_SETTINGS\") > -1 ||\r\n          codes.indexOf(\"APPS_EDIT\") > -1)\r\n      )\r\n        data.showConfig = true;\r\n      if (\r\n        seeded_apps_tabs.indexOf(\"SCHEDULER\") > -1 &&\r\n        (codes.indexOf(\"STD_APP_WORKFLOW_GENERAL_SETTINGS\") > -1 ||\r\n          codes.indexOf(\"APPS_EDIT\") > -1)\r\n      )\r\n        data.showScheduler = true;\r\n\t\tif(   seeded_apps_tabs.indexOf(\"USERACTIVITY\") > -1 &&\r\n        (codes.indexOf(\"STD_APP_WORKFLOW_GENERAL_SETTINGS\") > -1 ||\r\n          codes.indexOf(\"APPS_EDIT\") > -1)\r\n\t\t  )\r\n\t\t  data.showUserActivity = true;\r\n    }\r\n    console.log(\"Response - \" + JSON.stringify(data));\r\n    res.status(200).send(data);\r\n  })\r\n  .catch((err) => {\r\n    console.log(\"Error Executing Processor -\" + err);\r\n    res.status(500).send(err);\r\n  });\r\n",
  "sys__UUID": "7176d7e8-7bd4-40b9-a4af-72ee0239a161",
  "sys__createdOn": ISODate("2019-06-26T08:50:01.556Z"),
  "sys__createdBy": "Bravo"
}
